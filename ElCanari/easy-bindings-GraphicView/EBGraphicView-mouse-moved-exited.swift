//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//  THIS FILE IS GENERATED BY EASY BINDINGS, DO NOT MODIFY IT
//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

import AppKit

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

extension EBGraphicView {

  //····················································································································

  final override func updateTrackingAreas () { // This is required for receiving mouse moved and mouseExited events
  //--- Remove current tracking area
    if let trackingArea = self.mTrackingArea {
      self.removeTrackingArea (trackingArea)
    }
  //--- Add Updated tracking area
    let trackingArea = NSTrackingArea (
      rect: self.bounds,
      options: [.mouseEnteredAndExited, .mouseMoved, .activeInKeyWindow],
      owner: self,
      userInfo: nil
    )
    self.addTrackingArea (trackingArea)
    self.mTrackingArea = trackingArea
  //---
    super.updateTrackingAreas ()
  }

  //····················································································································

  final override func mouseMoved (with inEvent : NSEvent) {
    let locationInView = self.convert (inEvent.locationInWindow, from: nil)
    if self.visibleRect.contains(locationInView) {
      self.setHelperTextField (self.defaultHelperString (with: locationInView, inEvent.modifierFlags))
      let locationOnGridInView = locationInView.aligned (onGrid: canariUnitToCocoa (self.mMouseGridInCanariUnit))
      self.updateXYHelperWindow (mouseLocationInView: locationOnGridInView)
      if self.window?.firstResponder == self, self.visibleRect.contains (locationInView) {
        self.mMouseMovedOrFlagsChangedCallback? (locationInView)
      }else{
        self.mMouseExitCallback? ()
      }
    //--- Set cursor
      self.setCursor (forLocationInView: locationInView)
    }else{
      self.removeXYHelperWindow ()
      self.setHelperTextField (DEFAULT_HELPER_TEXT)
      self.mMouseExitCallback? ()
      self.mOptionalFrontShape = nil
      NSCursor.arrow.set ()
    }
    super.mouseMoved (with: inEvent)
  }

  //····················································································································

  final override func mouseExited (with inEvent : NSEvent) {
    self.removeXYHelperWindow ()
    self.setHelperTextField (DEFAULT_HELPER_TEXT)
    self.mMouseExitCallback? ()
    self.mOptionalFrontShape = nil
    NSCursor.arrow.set ()
    super.mouseExited (with: inEvent)
  }

  //····················································································································

}

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
