//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//  THIS FILE IS GENERATED BY EASY BINDINGS, DO NOT MODIFY IT
//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

import AppKit

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//    ReadOnlyAbstractObjectProperty
//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

class ReadOnlyAbstractObjectProperty <T : AnyObject> : ReadOnlyAbstractGenericRelationshipProperty {

  //····················································································································
  // Abstract methods
  //····················································································································

  var selection : EBSelection < T? > { get { return .empty } }  // Abstract method

  //····················································································································
  //  Internal value
  //····················································································································

  final weak var mWeakInternalValue : T? = nil {
    didSet {
      if self.mWeakInternalValue !== oldValue {
        if (self.mWeakInternalValue == nil) != (oldValue == nil) {
          self.none_property.observedObjectDidChange ()
        }
        self.observedObjectDidChange ()
        self.notifyModelDidChangeFrom (oldValue: oldValue)
        self.notifyModelDidChange ()
      }
    }
  }

  //····················································································································

  func notifyModelDidChangeFrom (oldValue inOldValue : T?) {
  }

  //····················································································································
  //  none property
  //····················································································································

  final let none_property = EBTransientProperty <Bool> ()

  //····················································································································
  //  init
  //····················································································································

  override init () {
    super.init ()
    self.none_property.mReadModelFunction = { [weak self] in
      if let me = self {
        switch me.selection {
        case .empty :
          return .single (false)
        case .multiple :
          return .multiple
        case .single :
          return .single (true)
        }
      }else{
        return .empty
      }
    }
  }

  //····················································································································

}

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
