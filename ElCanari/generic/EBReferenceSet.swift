//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//  THIS FILE IS GENERATED BY EASY BINDINGS, DO NOT MODIFY IT
//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

import Cocoa

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

struct EBReferenceSet <T : AnyObject> {

  //····················································································································

  private var mDictionary : Dictionary <Int, T>

  //····················································································································

  init () {
    self.mDictionary = Dictionary <Int, T> ()
  }

  //····················································································································

  init (minimumCapacity inMinimumCapacity : Int) {
    self.mDictionary = Dictionary <Int, T> (minimumCapacity: inMinimumCapacity)
  }

  //····················································································································

//  init <U> (_ inOtherSet : EBReferenceSet <U>) where U : T {
//    self.mDictionary = inOtherSet.mDictionary
//  }

  //····················································································································

  init (_ inObjects : [T]) {
    self.mDictionary = Dictionary <Int, T> (minimumCapacity: inObjects.count)
    for object in inObjects {
      self.insert (object)
    }
  }

  //····················································································································

  mutating func insert (_ inObject : T) {
    let address : Int = unsafeBitCast (inObject, to: Int.self)
    self.mDictionary [address] = inObject
  }

  //····················································································································

  mutating func remove (_ inObject : T) {
    let address : Int = unsafeBitCast (inObject, to: Int.self)
    self.mDictionary [address] = nil
  }

  //····················································································································

  func contains (_ inObject : T) -> Bool {
    let address : Int = unsafeBitCast (inObject, to: Int.self)
    return self.mDictionary [address] != nil
  }

  //····················································································································

  func intersection (_ inOtherSet : EBReferenceSet <T>) -> EBReferenceSet <T> {
    var result = EBReferenceSet <T> ()
    if self.mDictionary.count < inOtherSet.mDictionary.count {
      for value in self.mDictionary.values {
        if inOtherSet.contains (value) {
          result.insert (value)
        }
      }
    }else{
      for value in inOtherSet.mDictionary.values {
        if self.contains (value) {
          result.insert (value)
        }
      }
    }
    return result
  }

  //····················································································································

  func intersection (_ inArray : [T]) -> EBReferenceSet <T> {
    var result = EBReferenceSet <T> ()
    for value in inArray {
      if self.contains (value) {
        result.insert (value)
      }
    }
    return result
  }

  //····················································································································

  var first : T? { return self.mDictionary.first?.value }

  //····················································································································

  var isEmpty : Bool { return self.mDictionary.isEmpty }

  //····················································································································

  var count : Int { return self.mDictionary.count }

  //····················································································································

  var values : Dictionary <Int, T>.Values { return self.mDictionary.values }

  //····················································································································

//  func <U> convertedTo () ->  {
//    self.mDictionary = inOtherSet.mDictionary
//  }

  //····················································································································

  func subtracting (_ inOtherSet : EBReferenceSet <T>) -> EBReferenceSet <T> {
     var result = self
     for (key, _) in inOtherSet.mDictionary {
       result.mDictionary [key] = nil
     }
     return result
  }

  //····················································································································

}

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

//extension EBReferenceSet {
//
//  init <S> (_ inSequence : S) where S : Sequence, T == S.Element {
//    self.mDictionary = inOtherSet.mDictionary
//  }
//
//}

