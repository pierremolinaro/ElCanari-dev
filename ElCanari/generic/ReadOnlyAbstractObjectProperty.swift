//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//  THIS FILE IS GENERATED BY EASY BINDINGS, DO NOT MODIFY IT
//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

import Cocoa

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//    ReadOnlyAbstractObjectProperty
//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

//var gT : TimeInterval = 0.0
//var gT2 : TimeInterval = 0.0

class ReadOnlyAbstractObjectProperty <T : AnyObject> : ReadOnlyAbstractGenericRelationshipProperty {

  //····················································································································
  // Abstract methods
  //····················································································································

  var selection : EBSelection < T? > { get { return .empty } }  // Abstract method

  //····················································································································

  var propval : T? { return nil } // Abstract method

  //····················································································································
  //  Internal value
  //····················································································································

  internal final var mInternalValue : T? = nil {
    didSet {
      if self.mInternalValue !== oldValue {
        if (self.mInternalValue == nil) != (oldValue == nil) {
          self.none_property.postEvent ()
        }
        self.postEvent ()
//        let s = Date ()
          self.notifyModelDidChangeFrom (oldValue: oldValue)
//        gT += Date ().timeIntervalSince (s) * 1_000.0
//        let s2 = Date ()
          self.notifyModelDidChange ()
//        gT2 += Date ().timeIntervalSince (s2) * 1_000.0
      }
//      Swift.print ("\(Int (gT)) \(Int (gT2)) ms")
    }
  }

  //····················································································································

  internal func notifyModelDidChangeFrom (oldValue inOldValue : T?) {
  }

  //····················································································································
  //  none property
  //····················································································································

  final var none_property = EBTransientProperty_Bool ()

  //····················································································································
  //  init
  //····················································································································

  override init () {
    super.init ()
    self.none_property.mReadModelFunction = { [weak self] in
      if let me = self {
        switch me.selection {
        case .empty :
          return .single (false)
        case .multiple :
          return .multiple
        case .single :
          return .single (true)
        }
      }else{
        return .empty
      }
    }
  }

  //····················································································································

}

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
